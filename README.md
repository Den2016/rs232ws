# RS232 to WebSocket Bridge

Передача данных из RS232 (COM порт) в WebSocket.

Программа на NodeJS+Electron для передачи данных из СОМ-порта в веб-сокет. Используется для организации передачи данных со сканера штрих-кодов в браузер и не только. 
Любой клиент, способный открыть веб-сокет может подключиться и получать сканированные данные. Сокет по умолчанию слушает порт 58081.

## Версия 1.2.0

### Основные возможности

- **Передача данных**: COM-порт → WebSocket (и обратно)
- **Автоматический реконнект**: При отключении COM-порта программа автоматически переподключается через 3 секунды
- **Визуальный статус подключения**: Отображение текущего состояния порта (Подключен/Отключен/Переподключение...)
- **Динамическое обновление списка портов**: При клике на выбор порта список автоматически обновляется
- **Горячая замена настроек**: Изменение порта, скорости и других параметров без перезапуска приложения
- **Работа в трее**: Приложение сворачивается в системный трей
- **Автозапуск**: Опциональный запуск при старте Windows

### Настройки

- **Порт WebSocket**: По умолчанию 58081
- **COM-порт**: Выбор из списка доступных портов
- **Скорость обмена**: От 2400 до 2000000 бит/сек
- **Использовать порт**: Возможность отключить работу с COM-портом

### Технические требования

- Node.js 16.2 (критично для корректной сборки)
- Windows (ia32 архитектура)
- Electron 21.4.0

### Зависимости

- serialport 10.5.0
- ws 8.18.1
- electron-store 8.2.0

### Установка и запуск

```bash
npm install
npm start
```

### Сборка

```bash
npm run build
```

Готовый инсталлятор будет создан в папке `dist/`.

### Особенности работы

- **Монопольный захват порта**: COM-порт захватывается эксклюзивно
- **Автоматическое переподключение**: При исчезновении и появлении порта в системе происходит автоматический реконнект
- **Множественные WebSocket клиенты**: Поддержка подключения нескольких клиентов одновременно
- **Двусторонняя связь**: WebSocket клиенты могут отправлять данные обратно в COM-порт

### Известные особенности

- COM-порт захватывается монопольно (это ограничение операционной системы)
- Если порт уже открыт другим приложением, будет автоматически запущен реконнект через 3 секунды
- Для корректной работы используйте Node.js 16.2 - другие версии могут вызвать проблемы при сборке

### Структура проекта

```
rs232ws/
├── src/
│   ├── ComToWsBridge.js    # Основной класс моста COM-WS
│   ├── renderer.html        # Интерфейс настроек
│   └── renderer.js          # Логика интерфейса (устарел)
├── main.js                  # Главный процесс Electron
├── preload.js              # Preload скрипт для безопасности
├── package.json            # Конфигурация проекта
└── installer.nsi           # Настройки NSIS инсталлятора
```

### Лицензия

MIT

### Автор

Den2016
